# 关于线程池

1. 设计思路

   线程池是这个项目中第一个开始编写的组件，主要内容：

   - 采用多对多的生产者—消费者模型作为内部结构
   - 通过一个线程安全的阻塞队列来实现。队列使用结构为：`std::queue`，保证线程安全并增加阻塞特性的方式为：`std::mutex`+`std::condition_variable`
   - 为了保证该线程池的复用性，我采用了模板表示线程池中的任务，结合可变模版参数和`std::future`实现了完备的模板泛化。这算是我第一次实践泛型编程，整个类的实现中在这里花费的时间最多，最后的成果：
     - 这个线程池可以获取任意形式、任意返回值、任意参数的函数作为传入值（通过模板）
     - 最后如果有需要的话还可以获取线程完成任务后的返回值（通过future）
   - 最后是关于析构，我对该线程池的析构定义为：在线程池析构时，它会在队列中所有已存在的任务都被执行完后，回收所有的子线程。

